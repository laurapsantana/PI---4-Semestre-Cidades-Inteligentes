<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="img/logo-projeto.png" type="image/x-icon">
    <link rel="stylesheet" href="style2.css">
    <title>Cadastro de Bueiro</title>
  
</head>
<body>
<script>
  function limpa_formulário_cep() {
    document.getElementById('rua').value=("");
    document.getElementById('bairro').value=("");
    document.getElementById('cidade').value=("");
    document.getElementById('uf').value=("");
  }

  function meu_callback(conteudo) {
    if (!("erro" in conteudo)) {
      document.getElementById('rua').value=(conteudo.logradouro);
      document.getElementById('bairro').value=(conteudo.bairro);
      document.getElementById('cidade').value=(conteudo.localidade);
      document.getElementById('uf').value=(conteudo.uf);
    } else {
      limpa_formulário_cep();
      alert("CEP não encontrado.");
    }
  }

  function pesquisacep(valor) {
    var cep = valor.replace(/\D/g, '');
    if (cep != "") {
      var validacep = /^[0-9]{8}$/;
      if(validacep.test(cep)) {
        document.getElementById('rua').value="...";
        document.getElementById('bairro').value="...";
        document.getElementById('cidade').value="...";
        document.getElementById('uf').value="...";

        var script = document.createElement('script');
        script.src = 'https://viacep.com.br/ws/'+ cep + '/json/?callback=meu_callback';
        document.body.appendChild(script);
      } else {
        limpa_formulário_cep();
        alert("Formato de CEP inválido.");
      }
    } else {
      limpa_formulário_cep();
    }
  }
</script>

<body>
    <div class="container">
        <div class="logo">
            <img src="img/logo-projeto.png" alt="Logo do Projeto">
        </div>
        <div class="form-container">
            <form action="/submit" method="POST">
                <h2>Cadastro de Bueiro</h2>
                <label for="descricao">Descrição:</label>
                <input type="text" id="descricao" name="descricao" required>
                <label for="latitude">Digite a Latitude:</label>
                <input type="text" id="latitude" name="latitude" required>
                <label for="longitude">Digite a Longitude:</label>
                <input type="text" id="longitude" name="longitude" required>               
                <label for="cep">Digite o CEP:</label>
                <input type="text" id="cep" name="cep" size="10" maxlength="9" onblur="pesquisacep(this.value);">
                <label for="rua">Rua:</label>
                <input type="text" id="rua" name="rua" size="60">
                <label for="bairro">Bairro:</label>
                <input type="text" id="bairro" name="bairro" size="40">
                <label for="cidade">Cidade:</label>
                <input type="text" id="cidade" name="cidade" size="40">
                <label for="uf">Estado:</label>
                <input type="text" id="uf" name="uf" size="2">
                <label for="status">Digite o Status:</label>
                <select id="status" name="status" required>
                    <option value="" disabled selected>Selecione</option>
                    <option value="ativo">Ativo</option> 
                    <option value="inativo">Inativo</option> 
                    <option value="manutencao">Em Manutenção</option>
                </select>
                <label for="dataInstalacao">Data de Instalação:</label>
                <input type="date" id="dataInstalacao" name="dataInstalacao" required>
                <label for="ultimaManutencao">Última Manutenção:</label>
                <input type="date" id="ultimaManutencao" name="ultimaManutencao">
                <button type="submit">Cadastrar</button>
            </form>
        </div>
    </div>
</body>
</html>
